import React, { useState } from 'react';
import { BarChart, Bar, LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, ReferenceLine } from 'recharts';

const OrderbookDeltaGuide = () => {
  const [selectedExample, setSelectedExample] = useState('balanced');

  // Datos de ejemplo del Delta
  const exampleData = {
    balanced: {
      title: '‚öñÔ∏è Mercado Equilibrado',
      description: 'Delta cerca de 0 = Fuerzas compradoras y vendedoras iguales',
      color: 'bg-gray-500',
      signal: 'NEUTRAL',
      action: 'Esperar confirmaci√≥n de tendencia',
      data: [
        { time: '10:00', delta: 0.05, price: 100000 },
        { time: '10:15', delta: -0.03, price: 100050 },
        { time: '10:30', delta: 0.02, price: 100100 },
        { time: '10:45', delta: -0.01, price: 100080 },
        { time: '11:00', delta: 0.04, price: 100120 }
      ]
    },
    bullish: {
      title: 'üü¢ Presi√≥n Compradora Fuerte',
      description: 'Delta > +0.5 = Muchas m√°s √≥rdenes de COMPRA que de VENTA',
      color: 'bg-green-500',
      signal: 'BULLISH',
      action: 'Se√±al alcista - Posible subida de precio',
      data: [
        { time: '10:00', delta: 0.3, price: 99500 },
        { time: '10:15', delta: 0.5, price: 99800 },
        { time: '10:30', delta: 0.7, price: 100200 },
        { time: '10:45', delta: 0.85, price: 100600 },
        { time: '11:00', delta: 0.92, price: 101000 }
      ]
    },
    bearish: {
      title: 'üî¥ Presi√≥n Vendedora Fuerte',
      description: 'Delta < -0.5 = Muchas m√°s √≥rdenes de VENTA que de COMPRA',
      color: 'bg-red-500',
      signal: 'BEARISH',
      action: 'Se√±al bajista - Posible ca√≠da de precio',
      data: [
        { time: '10:00', delta: -0.2, price: 100500 },
        { time: '10:15', delta: -0.4, price: 100200 },
        { time: '10:30', delta: -0.65, price: 99800 },
        { time: '10:45', delta: -0.8, price: 99400 },
        { time: '11:00', delta: -0.9, price: 99000 }
      ]
    },
    reversal: {
      title: 'üîÑ Reversi√≥n Potencial',
      description: 'Delta cambia de extremo a extremo = Cambio de sentimiento',
      color: 'bg-purple-500',
      signal: 'REVERSAL',
      action: 'Posible cambio de tendencia - Alta volatilidad',
      data: [
        { time: '10:00', delta: -0.8, price: 99000 },
        { time: '10:15', delta: -0.5, price: 99200 },
        { time: '10:30', delta: 0.0, price: 99500 },
        { time: '10:45', delta: 0.6, price: 100000 },
        { time: '11:00', delta: 0.85, price: 100500 }
      ]
    }
  };

  const currentExample = exampleData[selectedExample];

  return (
    <div className="w-full min-h-screen bg-gradient-to-br from-slate-900 via-blue-950 to-slate-900 p-4 md:p-8">
      <div className="max-w-7xl mx-auto">
        {/* Header */}
        <div className="text-center mb-8">
          <h1 className="text-3xl md:text-5xl font-bold text-white mb-2">
            üìä Orderbook Liquidity Delta
          </h1>
          <p className="text-blue-300 text-lg">Gu√≠a Completa - CoinGlass (¬±1%)</p>
        </div>

        {/* Conceptos B√°sicos */}
        <div className="bg-slate-800/50 rounded-xl p-6 mb-8 shadow-2xl backdrop-blur">
          <h2 className="text-white text-2xl font-bold mb-4">üéØ Conceptos B√°sicos</h2>
          
          <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div className="bg-green-900/30 rounded-lg p-4 border border-green-500/30">
              <h3 className="text-green-400 font-bold text-lg mb-2">üìà Bids (Compras)</h3>
              <p className="text-slate-300 text-sm">
                √ìrdenes esperando para <strong>COMPRAR</strong> BTC
              </p>
              <p className="text-slate-400 text-xs mt-2">
                Ejemplo: "Quiero comprar 10 BTC a $99,500"
              </p>
            </div>
            
            <div className="bg-red-900/30 rounded-lg p-4 border border-red-500/30">
              <h3 className="text-red-400 font-bold text-lg mb-2">üìâ Asks (Ventas)</h3>
              <p className="text-slate-300 text-sm">
                √ìrdenes esperando para <strong>VENDER</strong> BTC
              </p>
              <p className="text-slate-400 text-xs mt-2">
                Ejemplo: "Quiero vender 10 BTC a $100,500"
              </p>
            </div>
          </div>

          <div className="mt-6 bg-blue-900/30 rounded-lg p-4 border border-blue-500/30">
            <h3 className="text-blue-400 font-bold text-lg mb-2">‚ö° Delta = Diferencia</h3>
            <p className="text-slate-300 text-sm mb-3">
              <strong>F√≥rmula:</strong> Delta = (Bids - Asks) / (Bids + Asks)
            </p>
            <div className="space-y-2 text-sm">
              <p className="text-green-400">‚úÖ Delta = +1.0 ‚Üí 100% √≥rdenes de compra (muy alcista)</p>
              <p className="text-yellow-400">‚ö†Ô∏è Delta = 0.0 ‚Üí 50/50 equilibrado (neutral)</p>
              <p className="text-red-400">‚ùå Delta = -1.0 ‚Üí 100% √≥rdenes de venta (muy bajista)</p>
            </div>
          </div>
        </div>

        {/* Selector de Ejemplos */}
        <div className="flex gap-4 mb-8 flex-wrap justify-center">
          {Object.keys(exampleData).map((key) => (
            <button
              key={key}
              onClick={() => setSelectedExample(key)}
              className={`px-6 py-3 rounded-lg font-semibold transition-all ${
                selectedExample === key
                  ? exampleData[key].color + ' text-white shadow-lg scale-105'
                  : 'bg-slate-700 text-slate-300 hover:bg-slate-600'
              }`}
            >
              {exampleData[key].title}
            </button>
          ))}
        </div>

        {/* Gr√°fico de Ejemplo */}
        <div className="bg-slate-800/50 rounded-xl p-6 shadow-2xl backdrop-blur mb-8">
          <div className={`${currentExample.color} rounded-lg p-4 mb-6`}>
            <h3 className="text-white text-xl font-bold mb-2">{currentExample.title}</h3>
            <p className="text-white/90 text-sm mb-1">{currentExample.description}</p>
            <p className="text-white font-semibold">üé¨ Acci√≥n: {currentExample.action}</p>
          </div>

          <ResponsiveContainer width="100%" height={350}>
            <LineChart data={currentExample.data}>
              <CartesianGrid strokeDasharray="3 3" stroke="#334155" />
              <XAxis dataKey="time" stroke="#94a3b8" />
              <YAxis 
                stroke="#94a3b8" 
                domain={[-1, 1]}
                ticks={[-1, -0.5, 0, 0.5, 1]}
              />
              <Tooltip 
                contentStyle={{
                  backgroundColor: '#1e293b',
                  border: '1px solid #475569',
                  borderRadius: '8px',
                  color: '#fff'
                }}
              />
              <Legend />
              <ReferenceLine y={0} stroke="#64748b" strokeDasharray="3 3" />
              <ReferenceLine y={0.5} stroke="#10b981" strokeDasharray="2 2" />
              <ReferenceLine y={-0.5} stroke="#ef4444" strokeDasharray="2 2" />
              <Line 
                type="monotone" 
                dataKey="delta" 
                stroke="#3b82f6" 
                strokeWidth={3}
                dot={{ fill: '#3b82f6', r: 6 }}
                name="Liquidity Delta"
              />
            </LineChart>
          </ResponsiveContainer>
        </div>

        {/* Escala de Interpretaci√≥n */}
        <div className="bg-slate-800/50 rounded-xl p-6 shadow-2xl backdrop-blur mb-8">
          <h3 className="text-white text-2xl font-bold mb-6 text-center">
            üìè Escala de Interpretaci√≥n
          </h3>
          
          <div className="space-y-3">
            <div className="bg-green-500 rounded-lg p-4 flex justify-between items-center">
              <div>
                <span className="text-white font-bold text-lg">+0.7 a +1.0</span>
                <p className="text-white/90 text-sm">COMPRA FUERTE - Presi√≥n alcista extrema</p>
              </div>
              <span className="text-3xl">üöÄ</span>
            </div>
            
            <div className="bg-green-600 rounded-lg p-4 flex justify-between items-center">
              <div>
                <span className="text-white font-bold text-lg">+0.3 a +0.7</span>
                <p className="text-white/90 text-sm">COMPRA MODERADA - Sesgo alcista</p>
              </div>
              <span className="text-3xl">üìà</span>
            </div>
            
            <div className="bg-gray-500 rounded-lg p-4 flex justify-between items-center">
              <div>
                <span className="text-white font-bold text-lg">-0.3 a +0.3</span>
                <p className="text-white/90 text-sm">NEUTRAL - Equilibrio, esperar confirmaci√≥n</p>
              </div>
              <span className="text-3xl">‚öñÔ∏è</span>
            </div>
            
            <div className="bg-red-600 rounded-lg p-4 flex justify-between items-center">
              <div>
                <span className="text-white font-bold text-lg">-0.7 a -0.3</span>
                <p className="text-white/90 text-sm">VENTA MODERADA - Sesgo bajista</p>
              </div>
              <span className="text-3xl">üìâ</span>
            </div>
            
            <div className="bg-red-500 rounded-lg p-4 flex justify-between items-center">
              <div>
                <span className="text-white font-bold text-lg">-1.0 a -0.7</span>
                <p className="text-white/90 text-sm">VENTA FUERTE - Presi√≥n bajista extrema</p>
              </div>
              <span className="text-3xl">üí•</span>
            </div>
          </div>
        </div>

        {/* Estrategias de Trading */}
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
          <div className="bg-slate-800/50 rounded-xl p-6 shadow-2xl backdrop-blur">
            <h3 className="text-green-400 font-bold text-xl mb-4">‚úÖ Se√±ales de Compra</h3>
            <ul className="space-y-3 text-slate-300">
              <li className="flex items-start gap-2">
                <span className="text-green-400">‚Ä¢</span>
                <span><strong>Delta pasa de negativo a positivo</strong> - Cambio de sentimiento</span>
              </li>
              <li className="flex items-start gap-2">
                <span className="text-green-400">‚Ä¢</span>
                <span><strong>Delta &gt; +0.7</strong> - Fuerte presi√≥n compradora</span>
              </li>
              <li className="flex items-start gap-2">
                <span className="text-green-400">‚Ä¢</span>
                <span><strong>Delta aumenta con el precio</strong> - Tendencia confirmada</span>
              </li>
              <li className="flex items-start gap-2">
                <span className="text-green-400">‚Ä¢</span>
                <span><strong>Divergencia alcista</strong> - Precio baja pero delta sube</span>
              </li>
            </ul>
          </div>

          <div className="bg-slate-800/50 rounded-xl p-6 shadow-2xl backdrop-blur">
            <h3 className="text-red-400 font-bold text-xl mb-4">‚ùå Se√±ales de Venta</h3>
            <ul className="space-y-3 text-slate-300">
              <li className="flex items-start gap-2">
                <span className="text-red-400">‚Ä¢</span>
                <span><strong>Delta pasa de positivo a negativo</strong> - P√©rdida de fuerza</span>
              </li>
              <li className="flex items-start gap-2">
                <span className="text-red-400">‚Ä¢</span>
                <span><strong>Delta &lt; -0.7</strong> - Fuerte presi√≥n vendedora</span>
              </li>
              <li className="flex items-start gap-2">
                <span className="text-red-400">‚Ä¢</span>
                <span><strong>Delta disminuye con el precio</strong> - Confirmaci√≥n bajista</span>
              </li>
              <li className="flex items-start gap-2">
                <span className="text-red-400">‚Ä¢</span>
                <span><strong>Divergencia bajista</strong> - Precio sube pero delta baja</span>
              </li>
            </ul>
          </div>
        </div>

        {/* Tips Avanzados */}
        <div className="bg-gradient-to-r from-purple-900/50 to-blue-900/50 rounded-xl p-6 shadow-2xl backdrop-blur">
          <h3 className="text-white font-bold text-2xl mb-4">üí° Tips Pro</h3>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4 text-slate-300">
            <div>
              <p className="mb-2">
                <span className="text-purple-400">‚Ä¢</span> <strong>Combina con volumen:</strong> Delta alto + volumen alto = se√±al m√°s fuerte
              </p>
              <p className="mb-2">
                <span className="text-purple-400">‚Ä¢</span> <strong>Watch el ¬±1%:</strong> Cambios en rangos cercanos son m√°s relevantes
              </p>
              <p className="mb-2">
                <span className="text-purple-400">‚Ä¢</span> <strong>Timeframes:</strong> Delta en 1min (scalping) vs 1h (swing)
              </p>
            </div>
            <div>
              <p className="mb-2">
                <span className="text-blue-400">‚Ä¢</span> <strong>No uses solo:</strong> Combina con precio, RSI, MACD
              </p>
              <p className="mb-2">
                <span className="text-blue-400">‚Ä¢</span> <strong>Liquidez baja:</strong> Delta puede ser enga√±oso en mercados il√≠quidos
              </p>
              <p className="mb-2">
                <span className="text-blue-400">‚Ä¢</span> <strong>Spoofing:</strong> Ballenas pueden poner/quitar √≥rdenes falsas
              </p>
            </div>
          </div>
        </div>

        <div className="mt-8 text-center text-slate-400 text-sm">
          Datos de ejemplo | En CoinGlass ver√°s datos REALES en tiempo real
        </div>
      </div>
    </div>
  );
};

export default OrderbookDeltaGuide;

